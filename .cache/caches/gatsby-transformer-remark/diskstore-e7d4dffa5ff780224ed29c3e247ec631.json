{"expireTime":9007200914465209000,"key":"transformer-remark-markdown-html-ast-53f18ff107266ede4d40bb32c5cfbd9f--","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The easiest way to write to files in Node.js is to use the ","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":60,"offset":61}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"fs.writeFile()"}],"position":{"start":{"line":3,"column":60,"offset":61},"end":{"line":3,"column":76,"offset":77}}},{"type":"text","value":" API.","position":{"start":{"line":3,"column":76,"offset":77},"end":{"line":3,"column":81,"offset":82}}}],"position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":81,"offset":82}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Example:","position":{"start":{"line":5,"column":1,"offset":84},"end":{"line":5,"column":9,"offset":92}}}],"position":{"start":{"line":5,"column":1,"offset":84},"end":{"line":5,"column":9,"offset":92}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"//\nconst fs = require('fs');\n\nconst content = 'Some content!';\n\nfs.writeFile('/Users/joe/test.txt', content, (err) => {\n    if (err) {\n        console.error(err);\n        return;\n    }\n    //file written successfully\n});\n"}],"position":{"start":{"line":7,"column":1,"offset":94},"end":{"line":20,"column":4,"offset":324}}}],"position":{"start":{"line":7,"column":1,"offset":94},"end":{"line":20,"column":4,"offset":324}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Alternatively, you can use the synchronous version ","position":{"start":{"line":22,"column":1,"offset":326},"end":{"line":22,"column":52,"offset":377}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"fs.writeFileSync()"}],"position":{"start":{"line":22,"column":52,"offset":377},"end":{"line":22,"column":72,"offset":397}}},{"type":"text","value":":","position":{"start":{"line":22,"column":72,"offset":397},"end":{"line":22,"column":73,"offset":398}}}],"position":{"start":{"line":22,"column":1,"offset":326},"end":{"line":22,"column":73,"offset":398}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"//\nconst fs = require('fs');\n\nconst content = 'Some content!';\n\ntry {\n    const data = fs.writeFileSync('/Users/joe/test.txt', content);\n    //file written successfully\n} catch (err) {\n    console.error(err);\n}\n"}],"position":{"start":{"line":24,"column":1,"offset":400},"end":{"line":36,"column":4,"offset":620}}}],"position":{"start":{"line":24,"column":1,"offset":400},"end":{"line":36,"column":4,"offset":620}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"By default, this API will ","position":{"start":{"line":38,"column":1,"offset":622},"end":{"line":38,"column":27,"offset":648}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"replace the contents of the file","position":{"start":{"line":38,"column":29,"offset":650},"end":{"line":38,"column":61,"offset":682}}}],"position":{"start":{"line":38,"column":27,"offset":648},"end":{"line":38,"column":63,"offset":684}}},{"type":"text","value":" if it does already exist.","position":{"start":{"line":38,"column":63,"offset":684},"end":{"line":38,"column":89,"offset":710}}}],"position":{"start":{"line":38,"column":1,"offset":622},"end":{"line":38,"column":89,"offset":710}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can modify the default by specifying a flag:","position":{"start":{"line":40,"column":1,"offset":712},"end":{"line":40,"column":49,"offset":760}}}],"position":{"start":{"line":40,"column":1,"offset":712},"end":{"line":40,"column":49,"offset":760}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"//\nfs.writeFile('/Users/joe/test.txt', content, { flag: 'a+' }, (err) => {});\n"}],"position":{"start":{"line":42,"column":1,"offset":762},"end":{"line":45,"column":4,"offset":849}}}],"position":{"start":{"line":42,"column":1,"offset":762},"end":{"line":45,"column":4,"offset":849}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The flags you'll likely use are","position":{"start":{"line":47,"column":1,"offset":851},"end":{"line":47,"column":32,"offset":882}}}],"position":{"start":{"line":47,"column":1,"offset":851},"end":{"line":47,"column":32,"offset":882}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"r+"}],"position":{"start":{"line":49,"column":3,"offset":886},"end":{"line":49,"column":7,"offset":890}}},{"type":"text","value":" open the file for reading and writing","position":{"start":{"line":49,"column":7,"offset":890},"end":{"line":49,"column":45,"offset":928}}}],"position":{"start":{"line":49,"column":1,"offset":884},"end":{"line":49,"column":45,"offset":928}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"w+"}],"position":{"start":{"line":50,"column":3,"offset":931},"end":{"line":50,"column":7,"offset":935}}},{"type":"text","value":" open the file for reading and writing, positioning the stream at the beginning of the file. The file is created if not existing","position":{"start":{"line":50,"column":7,"offset":935},"end":{"line":50,"column":135,"offset":1063}}}],"position":{"start":{"line":50,"column":1,"offset":929},"end":{"line":50,"column":135,"offset":1063}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"a"}],"position":{"start":{"line":51,"column":3,"offset":1066},"end":{"line":51,"column":6,"offset":1069}}},{"type":"text","value":" open the file for writing, positioning the stream at the end of the file. The file is created if not existing","position":{"start":{"line":51,"column":6,"offset":1069},"end":{"line":51,"column":116,"offset":1179}}}],"position":{"start":{"line":51,"column":1,"offset":1064},"end":{"line":51,"column":116,"offset":1179}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"a+"}],"position":{"start":{"line":52,"column":3,"offset":1182},"end":{"line":52,"column":7,"offset":1186}}},{"type":"text","value":" open the file for reading and writing, positioning the stream at the end of the file. The file is created if not existing","position":{"start":{"line":52,"column":7,"offset":1186},"end":{"line":52,"column":129,"offset":1308}}}],"position":{"start":{"line":52,"column":1,"offset":1180},"end":{"line":52,"column":129,"offset":1308}}},{"type":"text","value":"\n"}],"position":{"start":{"line":49,"column":1,"offset":884},"end":{"line":52,"column":129,"offset":1308}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"(you can find more flags at ","position":{"start":{"line":54,"column":1,"offset":1310},"end":{"line":54,"column":29,"offset":1338}}},{"type":"element","tagName":"a","properties":{"href":"https://nodejs.org/api/fs.html#fs_file_system_flags"},"children":[{"type":"text","value":"https://nodejs.org/api/fs.html#fs_file_system_flags","position":{"start":{"line":54,"column":30,"offset":1339},"end":{"line":54,"column":81,"offset":1390}}}],"position":{"start":{"line":54,"column":29,"offset":1338},"end":{"line":54,"column":82,"offset":1391}}},{"type":"text","value":")","position":{"start":{"line":54,"column":82,"offset":1391},"end":{"line":54,"column":83,"offset":1392}}}],"position":{"start":{"line":54,"column":1,"offset":1310},"end":{"line":54,"column":83,"offset":1392}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Append to a file","position":{"start":{"line":56,"column":4,"offset":1397},"end":{"line":56,"column":20,"offset":1413}}}],"position":{"start":{"line":56,"column":1,"offset":1394},"end":{"line":56,"column":20,"offset":1413}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A handy method to append content to the end of a file is ","position":{"start":{"line":58,"column":1,"offset":1415},"end":{"line":58,"column":58,"offset":1472}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"fs.appendFile()"}],"position":{"start":{"line":58,"column":58,"offset":1472},"end":{"line":58,"column":75,"offset":1489}}},{"type":"text","value":" (and its ","position":{"start":{"line":58,"column":75,"offset":1489},"end":{"line":58,"column":85,"offset":1499}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"fs.appendFileSync()"}],"position":{"start":{"line":58,"column":85,"offset":1499},"end":{"line":58,"column":106,"offset":1520}}},{"type":"text","value":" counterpart):","position":{"start":{"line":58,"column":106,"offset":1520},"end":{"line":58,"column":120,"offset":1534}}}],"position":{"start":{"line":58,"column":1,"offset":1415},"end":{"line":58,"column":120,"offset":1534}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"//\nconst content = 'Some content!';\n\nfs.appendFile('file.log', content, (err) => {\n    if (err) {\n        console.error(err);\n        return;\n    }\n    //done!\n});\n"}],"position":{"start":{"line":60,"column":1,"offset":1536},"end":{"line":71,"column":4,"offset":1709}}}],"position":{"start":{"line":60,"column":1,"offset":1536},"end":{"line":71,"column":4,"offset":1709}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Using streams","position":{"start":{"line":73,"column":4,"offset":1714},"end":{"line":73,"column":17,"offset":1727}}}],"position":{"start":{"line":73,"column":1,"offset":1711},"end":{"line":73,"column":17,"offset":1727}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All those methods write the full content to the file before returning the control back to your program (in the async version, this means executing the callback)","position":{"start":{"line":75,"column":1,"offset":1729},"end":{"line":75,"column":161,"offset":1889}}}],"position":{"start":{"line":75,"column":1,"offset":1729},"end":{"line":75,"column":161,"offset":1889}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In this case, a better option is to write the file content using streams.","position":{"start":{"line":77,"column":1,"offset":1891},"end":{"line":77,"column":74,"offset":1964}}}],"position":{"start":{"line":77,"column":1,"offset":1891},"end":{"line":77,"column":74,"offset":1964}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"72","position":{"start":{"line":79,"column":1,"offset":1966},"end":{"line":79,"column":3,"offset":1968}}}],"position":{"start":{"line":79,"column":1,"offset":1966},"end":{"line":79,"column":3,"offset":1968}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/posts/11194896/timeline"},"children":[],"position":{"start":{"line":81,"column":1,"offset":1970},"end":{"line":81,"column":54,"offset":2023}}}],"position":{"start":{"line":81,"column":1,"offset":1970},"end":{"line":81,"column":54,"offset":2023}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here's a sketch. Error handling is left as an exercise for the reader.","position":{"start":{"line":83,"column":1,"offset":2025},"end":{"line":83,"column":71,"offset":2095}}}],"position":{"start":{"line":83,"column":1,"offset":2025},"end":{"line":83,"column":71,"offset":2095}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"//\nlet fs = require('fs'),\n    path = require('path');\n\nfunction dirTree(filename) {\n    let stats = fs.lstatSync(filename),\n        info = {\n            path: filename,\n            name: path.basename(filename)\n        };\n\n    if (stats.isDirectory()) {\n        info.type = 'folder';\n        info.children = fs.readdirSync(filename).map(function (child) {\n            return dirTree(filename + '/' + child);\n        });\n    } else {\n        // Assuming it's a file. In real life it could be a symlink or\n        // something else!\n        info.type = 'file';\n    }\n\n    return info;\n}\n\nif (module.parent == undefined) {\n    // node dirTree.js ~/foo/bar\n    let util = require('util');\n    console.log(util.inspect(dirTree(process.argv[2]), false, null));\n}\n"}],"position":{"start":{"line":85,"column":1,"offset":2097},"end":{"line":116,"column":4,"offset":2864}}}],"position":{"start":{"line":85,"column":1,"offset":2097},"end":{"line":116,"column":4,"offset":2864}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":117,"column":1,"offset":2865}}}}