{"expireTime":9007200914465208000,"key":"transformer-remark-markdown-ast-879045d9d8dfaa5aa3fb3dde00141762--","val":{"type":"root","children":[{"type":"html","value":"<!--StartFragment-->","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":21,"offset":21},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Flattening arrays in JavaScript","position":{"start":{"line":4,"column":3,"offset":25},"end":{"line":4,"column":34,"offset":56},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":23},"end":{"line":4,"column":34,"offset":56},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Flattening arrays may not be an everyday need but, it is still an important need enough to be part of most utility libraries in JavaScript.","position":{"start":{"line":6,"column":1,"offset":58},"end":{"line":6,"column":140,"offset":197},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":58},"end":{"line":6,"column":140,"offset":197},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you have looked at this very simple problem before you have probably noticed that most of the time we only see one kind of implementation for it, the recursive way.","position":{"start":{"line":8,"column":1,"offset":199},"end":{"line":8,"column":168,"offset":366},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":199},"end":{"line":8,"column":168,"offset":366},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here, I would like to present another way of doing it, iteratively. I am not saying that the iterative way is better than the recursive way, although it has its advantages, but just that sometimes I think it is good to try solving problem with other approaches.","position":{"start":{"line":10,"column":1,"offset":368},"end":{"line":10,"column":262,"offset":629},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":368},"end":{"line":10,"column":262,"offset":629},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The classical recursive way","position":{"start":{"line":12,"column":4,"offset":634},"end":{"line":12,"column":31,"offset":661},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":631},"end":{"line":12,"column":31,"offset":661},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The classical recursive way is based on a function calling itself if the ","position":{"start":{"line":14,"column":1,"offset":663},"end":{"line":14,"column":74,"offset":736},"indent":[]}},{"type":"inlineCode","value":"i","position":{"start":{"line":14,"column":74,"offset":736},"end":{"line":14,"column":77,"offset":739},"indent":[]}},{"type":"text","value":" element in the array that we are looping through is also an array.","position":{"start":{"line":14,"column":77,"offset":739},"end":{"line":14,"column":144,"offset":806},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":663},"end":{"line":14,"column":144,"offset":806},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This method is the one used in ","position":{"start":{"line":16,"column":1,"offset":808},"end":{"line":16,"column":32,"offset":839},"indent":[]}},{"type":"inlineCode","value":"lodash","position":{"start":{"line":16,"column":32,"offset":839},"end":{"line":16,"column":40,"offset":847},"indent":[]}},{"type":"text","value":" for example.","position":{"start":{"line":16,"column":40,"offset":847},"end":{"line":16,"column":53,"offset":860},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":808},"end":{"line":16,"column":53,"offset":860},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"function baseFlatten(array, depth, predicate, isStrict, result) {\n    // lots of code here\n    if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n    } else {\n        arrayPush(result, value);\n    }\n    // lots of code here\n}","position":{"start":{"line":18,"column":1,"offset":862},"end":{"line":29,"column":4,"offset":1213},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note the original comment in the source code to remind us about recursion limitations in JavaScript.","position":{"start":{"line":31,"column":1,"offset":1215},"end":{"line":31,"column":101,"offset":1315},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1215},"end":{"line":31,"column":101,"offset":1315},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Then, here is the basic version that you would have probably implemented if you had to.","position":{"start":{"line":33,"column":1,"offset":1317},"end":{"line":33,"column":88,"offset":1404},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1317},"end":{"line":33,"column":88,"offset":1404},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"function flatten(arr) {\n    if (!Array.isArray(arr)) {\n        return [arr];\n    }\n\n    var array = [];\n    for (var i = 0; i < arr.length; i++) {\n        array = array.concat(flatten(arr[i]));\n    }\n    return array;\n}\n\nflatten([1, [2, [3]], [4]]); // => [1,2,3,4]","position":{"start":{"line":35,"column":1,"offset":1406},"end":{"line":49,"column":4,"offset":1689},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The iterative way","position":{"start":{"line":51,"column":4,"offset":1694},"end":{"line":51,"column":21,"offset":1711},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":1691},"end":{"line":51,"column":21,"offset":1711},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now, let’s look at another way of solving that problem. The new idea is to loop through the array and either concatenate the nested arrays to the original array or add the element to a resulting array as shown below.","position":{"start":{"line":53,"column":1,"offset":1713},"end":{"line":53,"column":217,"offset":1929},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":1713},"end":{"line":53,"column":217,"offset":1929},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"function flatten(arr) {\n    var array = [];\n    while (arr.length) {\n        var value = arr.shift();\n        if (Array.isArray(value)) {\n            // this line preserve the order\n            arr = value.concat(arr);\n        } else {\n            array.push(value);\n        }\n    }\n    return array;\n}\n\nflatten([1, [2, [3]], [4]]); // => [1,2,3,4]","position":{"start":{"line":55,"column":1,"offset":1931},"end":{"line":71,"column":4,"offset":2297},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Practice your “outside the box” thinking","position":{"start":{"line":73,"column":3,"offset":2301},"end":{"line":73,"column":43,"offset":2341},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":2299},"end":{"line":73,"column":43,"offset":2341},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I think it is nice to force ourselves to approach problems differently sometimes.","position":{"start":{"line":75,"column":1,"offset":2343},"end":{"line":75,"column":82,"offset":2424},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":2343},"end":{"line":75,"column":82,"offset":2424},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"First, you will have to forget about what you know and start thinking outside of “your” box. We all know how hard it is to forget about something we know to think differently but that a very good exercise, it keeps our mind flexible.","position":{"start":{"line":77,"column":1,"offset":2426},"end":{"line":77,"column":234,"offset":2659},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":2426},"end":{"line":77,"column":234,"offset":2659},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Secondly, it reminds us that a solution to a problem is only one solution amongst others. It forces us to evaluate our solutions compared to others and not taking for granted the first idea that came to our mind.","position":{"start":{"line":79,"column":1,"offset":2661},"end":{"line":79,"column":213,"offset":2873},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":2661},"end":{"line":79,"column":213,"offset":2873},"indent":[]}},{"type":"html","value":"<!--EndFragment-->","position":{"start":{"line":81,"column":1,"offset":2875},"end":{"line":81,"column":19,"offset":2893},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":82,"column":1,"offset":2894}}}}